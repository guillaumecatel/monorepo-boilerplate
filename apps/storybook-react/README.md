# üìö Storybook React

> Example app generated from the `storybook-react` template. Modern Storybook 10, React, i18n, Tailwind CSS 4, accessibility, and full test suite.

## üìñ Table of Contents

- [Overview](#-overview)
- [How to Use the Generator](#-how-to-use-the-generator)
- [Features](#-features)
- [Getting Started](#-getting-started)
- [Project Structure](#-project-structure)
- [Available Scripts](#-available-scripts)
- [Internationalization](#-internationalization)
- [Styling](#-styling)
- [Accessibility](#-accessibility)
- [Component Testing](#-component-testing)
- [Addons](#-addons)
- [Build & Production Deployment](#-build--production-deployment)
- [Configuration](#Ô∏è-configuration)

## üéØ Overview

This directory is an **example app** generated by the monorepo's code generator. It demonstrates a real-world Storybook setup for React components, with all best practices.

- **You can delete or regenerate this app at any time.**
- To create your own app, use the generator (see below).

## ‚ö° How to Use the Generator

From the monorepo root:

```bash
pnpm gen
# Select "app"
# Choose template: storybook-react
# Enter your app name
```

- The generated app will appear in `apps/<your-app-name>`
- You can also use sub-generators inside the app:

```bash
cd apps/<your-app-name>

# Options: create stories, create component, etc.
```

## ‚ú® Features

| Technology         | Purpose                        |
| ------------------ | ------------------------------ |
| Storybook 10       | UI component explorer          |
| React 18           | Component framework            |
| Paraglide.js       | Type-safe i18n                 |
| Tailwind CSS 4     | Utility-first styling          |
| TypeScript         | Type safety                    |
| Vitest/Playwright  | Component & E2E testing        |

- ‚ôø Accessibility testing (a11y addon)
- üìù Automatic documentation
- üîÑ Hot module replacement

## üöÄ Getting Started

### Prerequisites

- Node.js >= 24.0.0
- pnpm >= 10.0.0
- nvm (recommended)

```bash
nvm use
pnpm i
```

### Development

```bash
pnpm dev
```

### Build

```bash
pnpm build
```

## üìÇ Project Structure

```text
apps/storybook-react/
‚îú‚îÄ‚îÄ .storybook/                # Storybook config & decorators
‚îÇ   ‚îú‚îÄ‚îÄ main.ts
‚îÇ   ‚îú‚îÄ‚îÄ preview.tsx
‚îÇ   ‚îú‚îÄ‚îÄ style.css
‚îÇ   ‚îú‚îÄ‚îÄ vitest.setup.ts
‚îÇ   ‚îú‚îÄ‚îÄ i18n/                  # Generated by Paraglide.js
‚îÇ   ‚îî‚îÄ‚îÄ decorators/
‚îÇ       ‚îî‚îÄ‚îÄ withTranslations.tsx
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ Welcome.stories.tsx    # Example story
‚îú‚îÄ‚îÄ public/                    # Static assets
‚îú‚îÄ‚îÄ turbo/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ generators/
‚îÇ       ‚îú‚îÄ‚îÄ config.ts
‚îÇ       ‚îî‚îÄ‚îÄ templates/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ vite.config.ts
‚îî‚îÄ‚îÄ vitest.shims.d.ts
```

## üìú Available Scripts

| Command          | Description                              |
| ---------------  | ---------------------------------------- |
| `pnpm dev`       | Start Storybook dev server (port 9009)   |
| `pnpm build`     | Build static Storybook                   |
| `pnpm typecheck` | Type checking                            |
| `pnpm test`      | Run component tests with Vitest/Playwright|
| `pnpm clean`     | Clean generated files                    |

## üåç Internationalization

- Type-safe i18n with Paraglide.js
- Locales: French (`fr`, default), English (`en`)
- Switch language via Storybook toolbar
- i18n files auto-generated in `.storybook/i18n/`

Example usage in a story:

```tsx
import * as m from '../.storybook/i18n/messages'

export default {
  title: 'Example/Welcome',
  parameters: { layout: 'centered' },
}

export const Default = () => (
  <div>
    <h1>{m.welcome()}</h1>
    <p>{m.description()}</p>
  </div>
)
```

## üé® Styling

- Tailwind CSS 4, monorepo config (`tailwind-config`)
- Use Tailwind classes in stories/components

```tsx
export const Styled = () => (
  <button className='rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600'>
    Button
  </button>
)
```

## ‚ôø Accessibility

- a11y addon enabled by default
- Accessibility violations shown in Storybook panel

```tsx
export const AccessibleButton = () => (
  <button aria-label='Close'>√ó</button>
)
AccessibleButton.parameters = {
  a11y: { config: { rules: [{ id: 'color-contrast', enabled: true }] } },
}
```

## üß™ Component Testing

- Vitest + Playwright for component/E2E tests
- Example:

```tsx
import { test, expect } from '@storybook/experimental-addon-vitest'
import { composeStories } from '@storybook/react'
import * as stories from './Button.stories'

const { Primary } = composeStories(stories)

test('renders primary button', async ({ mount }) => {
  const component = await mount(<Primary />)
  await expect(component.getByRole('button')).toBeVisible()
})
```

Run tests:

```bash
pnpm test
```

## ‚ûï Addons

To add Storybook addons:

```bash
pnpm add -D @storybook/addon-controls
```

Update `.storybook/main.ts`:

```typescript
export default {
  addons: [
    '@storybook/addon-controls',
    // ... other addons
  ],
}
```



## üö¢ Build & Production Deployment

- `pnpm build` g√©n√®re la version statique de Storybook dans le dossier `storybook-static/`.
- Deux options de d√©ploiement‚ÄØ:
  - **Serveur Node.js (Express)** (inclus, pr√™t pour Docker/VM/Cloud Run)
  - **H√©bergement statique** (Vercel, Netlify, GitHub Pages, S3, etc.)

### D√©ploiement avec le serveur Express int√©gr√©

Un serveur Express de production est fourni (`server.mjs`).

#### Lancer en local ou en production

```bash
pnpm build
pnpm start
# ou
node server.mjs
```

Par d√©faut, le serveur √©coute sur le port 3001 (modifiable via la variable d'environnement `PORT`).

#### Variables d'environnement

| Variable | Par d√©faut | Description         |
|----------|------------|--------------------|
| PORT     | 3001       | Port du serveur    |

#### Utilisation avec Docker

Vous pouvez cr√©er une image Docker personnalis√©e pour servir Storybook avec Express.

### H√©bergement statique

Le dossier `storybook-static/` peut √™tre d√©ploy√© sur n'importe quel h√©bergeur de fichiers statiques‚ÄØ:

- Vercel
- Netlify
- GitHub Pages
- S3/CloudFront
- ...

#### Exemple de d√©ploiement sur Vercel

1. Poussez votre repo sur GitHub/GitLab.
2. Connectez le repo √† Vercel.
3. Configurez le dossier de sortie √† `apps/<your-app-name>/storybook-static`.

#### Exemple de d√©ploiement sur Netlify

1. Poussez votre repo sur GitHub/GitLab.
2. Connectez le repo √† Netlify.
3. Configurez le dossier de build √† `apps/<your-app-name>/storybook-static`.

#### D√©ploiement manuel

Vous pouvez aussi uploader le contenu de `storybook-static/` sur n'importe quel CDN ou serveur de fichiers statiques.

## ‚öôÔ∏è Configuration

- Storybook config: `.storybook/main.ts`, `.storybook/preview.tsx`
- Tailwind config: `tailwind-config` package
- TypeScript: `tsconfig.json`
- Vite: `vite.config.ts`

---

**Built with ‚ù§Ô∏è using Storybook, React, Paraglide.js, and Tailwind CSS, and the monorepo generator system.**
